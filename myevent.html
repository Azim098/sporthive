<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Events</title>
    <link rel="stylesheet" href="myevent.css">
</head>
<body>
    <nav>
        <div class="logo"> <img src="images/logo.png" alt="Sports Hive Logo">
        </div>
        <ul>
            <li><a href="organizer.html">Home</a></li>
            <li><a href="createevent.html">Create Event</a></li>
            <li><a href="reg.html">Registrations</a></li>
            <li><a href="oprofile.html">Profile</a></li>
        </ul>
    </nav>
    <section id="ongoing-events">
        <h2>Ongoing Events</h2>
        <div class="event-card">
            <h3>Live Tournament</h3>
            <p>Date: March 2, 2025</p>
            <p>Location: XYZ Stadium</p>
            <button onclick="showDetails('Live Tournament', 'March 2, 2025', 'XYZ Stadium', 'Exciting tournament happening now!')">View Details</button>
        </div>
    </section>

    <section id="event-list">
        <h2>Upcoming Events</h2>
        <div class="event-card">
            <h3>Event Name</h3>
            <p>Date: March 15, 2025</p>
            <p>Location: XYZ Stadium</p>
            <button onclick="showDetails('Event Name', 'March 15, 2025', 'XYZ Stadium', 'Details about the upcoming event.')">View Details</button>
        </div>
        
        <div class="event-card">
            <h3>Event Name 2</h3>
            <p>Date: April 10, 2025</p>
            <p>Location: ABC Arena</p>
            <button onclick="showDetails('Event Name 2', 'April 10, 2025', 'ABC Arena', 'More details about this event.')">View Details</button>
        </div>
    </section>

    <div id="event-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h3 id="modal-title"></h3>
            <p id="modal-date"></p>
            <p id="modal-location"></p>
            <p id="modal-description"></p>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 SportsHive</p>
    </footer>

    <script src="myevent.js"></script>
</body>
    <script>
        // Initialize Supabase
const { createClient } = supabase;
 const SUPABASE_URL = "https://idydtkpvhedgyoexkiox.supabase.co";
        const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlkeWR0a3B2aGVkZ3lvZXhraW94Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIwNDI3MzQsImV4cCI6MjA1NzYxODczNH0.52Qb21bBXalYvNPGBoH9xZJUjKs7fjTsESvx2-XCTaY";
const supabase = createClient(supabaseUrl, supabaseKey);

// Function to fetch and display events
async function fetchEvents() {
    // Get logged-in user
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
        alert("Please log in to view your events.");
        return;
    }

    // Fetch events created by this organizer
    const { data, error } = await supabase
        .from('events')
        .select('*')
        .eq('organizer_id', user.id); // Filter events by organizer

    if (error) {
        console.error("Error fetching events:", error.message);
        return;
    }

    // Display events
    const eventList = document.getElementById("event-list");
    eventList.innerHTML = "<h2>Your Events</h2>"; // Reset list

    data.forEach(event => {
        const eventCard = document.createElement("div");
        eventCard.classList.add("event-card");
        eventCard.innerHTML = `
            <h3>${event.title}</h3>
            <p>Date: ${new Date(event.date).toDateString()}</p>
            <p>Location: ${event.location}</p>
            <button onclick="showDetails('${event.title}', '${new Date(event.date).toDateString()}', '${event.location}', '${event.description}')">View Details</button>
        `;
        eventList.appendChild(eventCard);
    });
}

// Function to show event details in a modal
function showDetails(title, date, location, description) {
    document.getElementById("modal-title").innerText = title;
    document.getElementById("modal-date").innerText = "Date: " + date;
    document.getElementById("modal-location").innerText = "Location: " + location;
    document.getElementById("modal-description").innerText = description;
    document.getElementById("event-modal").style.display = "block";
}

// Function to close the modal
function closeModal() {
    document.getElementById("event-modal").style.display = "none";
}

// Fetch events when the page loads
document.addEventListener("DOMContentLoaded", fetchEvents);

    </script>
</html>
